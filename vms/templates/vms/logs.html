{% extends "vms/base.html" %}
{% block content %}
  <div class="card">
    <h2>Auditor</h2>
    <p>These logs show the simulated DSGA onboarding operations and other events.</p>
    <div id="log-panel" style="max-height:100%; overflow:auto; background:#fff; padding:8px; border:1px solid #eee;"></div>
  </div>
{% endblock %}

{% block extra_js %}
<script>
async function fetchLogs(){
  const res = await fetch("{% url 'vms:api_get_logs' %}");
  const j = await res.json();
  const panel = document.getElementById("log-panel");
  panel.innerHTML = j.entries.map(e => `<div style="border-bottom:1px solid #f2f2f2;padding:6px">
    <div style="font-size:12px;color:#666">${e.timestamp} — <strong>${e.level}</strong> — ${e.action}</div>
    <pre style="white-space:pre-wrap">${e.details}</pre>
  </div>`).join("");
}

// fetch once when page loads
document.addEventListener("DOMContentLoaded", fetchLogs);
</script>
{% endblock %}
